<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wowasi_ya - Project Documentation Generator | Iyéska</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'iyeska': {
                            rust: '#c06c4d',
                            'rust-light': '#d4897a',
                            'rust-dark': '#a85a3d',
                            blue: '#56738c',
                            'blue-light': '#6b8aa6',
                            dark: '#333333',
                        },
                        'surface': {
                            primary: '#0c1017',
                            secondary: '#141c27',
                            tertiary: '#1c2736',
                            elevated: '#243044',
                        },
                        'border': {
                            subtle: '#2a3545',
                            DEFAULT: '#3a4555',
                        }
                    },
                    fontFamily: {
                        sans: ['Open Sans', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Base styles */
        body {
            font-family: 'Open Sans', system-ui, sans-serif;
            background: #0c1017;
            color: #f8f8f8;
        }

        /* Subtle gradient background */
        .bg-gradient-surface {
            background: linear-gradient(180deg, #0c1017 0%, #0f1520 100%);
        }

        /* Header gradient with brand colors */
        .header-gradient {
            background: linear-gradient(135deg, rgba(28, 39, 54, 0.95) 0%, rgba(12, 16, 23, 0.98) 100%);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* Card styles */
        .card {
            background: #141c27;
            border: 1px solid #2a3545;
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            border-color: #3a4555;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* Input styles */
        .input-field {
            background: #1c2736;
            border: 1px solid #2a3545;
            border-radius: 10px;
            padding: 14px 16px;
            color: #f8f8f8;
            transition: all 0.2s ease;
            outline: none;
        }

        .input-field:focus {
            border-color: #c06c4d;
            box-shadow: 0 0 0 3px rgba(192, 108, 77, 0.15);
        }

        .input-field::placeholder {
            color: #6b7280;
        }

        /* Button styles */
        .btn-primary {
            background: linear-gradient(135deg, #c06c4d 0%, #a85a3d 100%);
            color: white;
            font-weight: 600;
            padding: 14px 28px;
            border-radius: 10px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 14px rgba(192, 108, 77, 0.25);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(192, 108, 77, 0.35);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #1c2736;
            border: 1px solid #2a3545;
            color: #f8f8f8;
            font-weight: 500;
            padding: 14px 28px;
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background: #243044;
            border-color: #3a4555;
        }

        /* Step indicator */
        .step-circle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .step-active .step-circle {
            background: linear-gradient(135deg, #c06c4d 0%, #a85a3d 100%);
            color: white;
            box-shadow: 0 0 20px rgba(192, 108, 77, 0.4);
        }

        .step-completed .step-circle {
            background: #c06c4d;
            color: white;
        }

        .step-pending .step-circle {
            background: #1c2736;
            border: 2px solid #2a3545;
            color: #6b7280;
        }

        .step-connector {
            height: 2px;
            background: #2a3545;
            flex: 1;
            max-width: 80px;
            margin: 0 8px;
            position: relative;
        }

        .step-connector.completed {
            background: linear-gradient(90deg, #c06c4d 0%, #c06c4d 100%);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(16px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse-glow {
            0%, 100% {
                opacity: 1;
                box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
            }
            50% {
                opacity: 0.7;
                box-shadow: 0 0 12px rgba(34, 197, 94, 0.6);
            }
        }

        .fade-in {
            animation: fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .pulse-status {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        /* Progress bar */
        .progress-track {
            background: #1c2736;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #c06c4d 0%, #d4897a 100%);
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Nested card */
        .nested-card {
            background: #1c2736;
            border: 1px solid #2a3545;
            border-radius: 12px;
        }

        /* Icon colors */
        .icon-rust { color: #c06c4d; }
        .icon-blue { color: #56738c; }
        .icon-success { color: #22c55e; }
        .icon-warning { color: #eab308; }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1c2736;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #3a4555;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4a5565;
        }

        /* Modal overlay */
        .modal-overlay {
            background: rgba(12, 16, 23, 0.85);
            backdrop-filter: blur(8px);
        }

        /* Toast styles */
        .toast {
            background: #1c2736;
            border: 1px solid #2a3545;
            border-radius: 10px;
            padding: 14px 18px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            animation: fadeInUp 0.3s ease;
        }

        .toast-success { border-left: 3px solid #22c55e; }
        .toast-error { border-left: 3px solid #ef4444; }
        .toast-info { border-left: 3px solid #56738c; }
        .toast-warning { border-left: 3px solid #eab308; }

        /* Empty state */
        .empty-state {
            background: linear-gradient(135deg, rgba(28, 39, 54, 0.5) 0%, rgba(20, 28, 39, 0.5) 100%);
            border: 1px dashed #2a3545;
            border-radius: 16px;
        }

        /* Mobile responsive step indicator */
        @media (max-width: 640px) {
            .step-indicator-desktop {
                display: none;
            }
            .step-indicator-mobile {
                display: flex;
            }
        }

        @media (min-width: 641px) {
            .step-indicator-mobile {
                display: none;
            }
        }

        /* Checkbox custom style */
        input[type="checkbox"] {
            appearance: none;
            width: 22px;
            height: 22px;
            background: #1c2736;
            border: 2px solid #3a4555;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        input[type="checkbox"]:checked {
            background: #c06c4d;
            border-color: #c06c4d;
        }

        input[type="checkbox"]:checked::after {
            content: '✓';
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        /* Select dropdown */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 18px;
            padding-right: 44px;
        }
    </style>
</head>
<body class="bg-gradient-surface min-h-screen">
    <!-- Navigation -->
    <nav class="header-gradient border-b border-border-subtle sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Brand -->
                <div class="flex items-center space-x-3">
                    <img src="/static/iyeska-logo.png" alt="Iyéska" class="h-10 w-10 object-contain">
                    <div>
                        <h1 class="text-lg font-semibold tracking-tight">Wowasi_ya</h1>
                        <p class="text-xs text-gray-500 -mt-0.5">Project Documentation Generator</p>
                    </div>
                </div>

                <!-- Status Indicator -->
                <div id="status-indicator" class="flex items-center space-x-2 text-sm">
                    <span class="w-2 h-2 bg-green-500 rounded-full pulse-status"></span>
                    <span class="text-green-400 font-medium">Connected</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Step Indicator - Desktop -->
        <div class="step-indicator-desktop mb-10">
            <div class="flex items-center justify-center">
                <div id="step-1" class="step-indicator step-active flex items-center">
                    <div class="step-circle">1</div>
                    <span class="ml-3 text-sm font-medium text-white">Describe</span>
                </div>
                <div id="connector-1" class="step-connector"></div>
                <div id="step-2" class="step-indicator step-pending flex items-center">
                    <div class="step-circle">2</div>
                    <span class="ml-3 text-sm font-medium text-gray-500">Review</span>
                </div>
                <div id="connector-2" class="step-connector"></div>
                <div id="step-3" class="step-indicator step-pending flex items-center">
                    <div class="step-circle">3</div>
                    <span class="ml-3 text-sm font-medium text-gray-500">Approve</span>
                </div>
                <div id="connector-3" class="step-connector"></div>
                <div id="step-4" class="step-indicator step-pending flex items-center">
                    <div class="step-circle">4</div>
                    <span class="ml-3 text-sm font-medium text-gray-500">Generate</span>
                </div>
            </div>
        </div>

        <!-- Step Indicator - Mobile -->
        <div class="step-indicator-mobile mb-6 justify-center">
            <div class="flex items-center space-x-2 bg-surface-secondary px-4 py-2 rounded-full border border-border-subtle">
                <span class="text-sm font-medium text-iyeska-rust">Step <span id="current-step-num">1</span></span>
                <span class="text-gray-500">of 4</span>
                <span class="text-gray-400 mx-2">•</span>
                <span id="current-step-name" class="text-sm text-white">Describe</span>
            </div>
        </div>

        <!-- Step 1: Project Input -->
        <section id="section-input" class="fade-in">
            <div class="card p-6 sm:p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-2">Start a New Project</h2>
                    <p class="text-gray-400">Enter your project details and we'll generate comprehensive documentation.</p>
                </div>

                <form id="project-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">Project Name</label>
                            <input type="text" id="project-name"
                                class="input-field w-full"
                                placeholder="e.g., Tribal Telehealth Initiative">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">Project Area</label>
                            <select id="project-area" class="input-field w-full">
                                <option value="01_Personal">Personal</option>
                                <option value="02_MBIRI">MBIRI</option>
                                <option value="03_NativeBio">NativeBio</option>
                                <option value="04_Iyeska" selected>Iyeska</option>
                                <option value="05_ProjectH3LP">ProjectH3LP</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2 text-gray-300">Project Description</label>
                        <textarea id="project-description" rows="6"
                            class="input-field w-full resize-none"
                            placeholder="Describe your project in detail. Include goals, target audience, key features, and any specific requirements or constraints..."></textarea>
                        <p class="text-xs text-gray-500 mt-2">The more detail you provide, the better the generated documentation will be.</p>
                    </div>

                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between pt-4 gap-4">
                        <div class="flex items-center text-sm text-gray-500">
                            <i class="fas fa-shield-alt icon-blue mr-2"></i>
                            Your data is reviewed for privacy before any API calls
                        </div>
                        <button type="submit" id="submit-btn" class="btn-primary flex items-center space-x-2 w-full sm:w-auto justify-center">
                            <span>Analyze Project</span>
                            <i class="fas fa-arrow-right text-sm"></i>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Recent Projects -->
            <div class="mt-10">
                <h3 class="text-lg font-semibold mb-5 text-gray-200">Recent Projects</h3>
                <div id="recent-projects" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Projects will be loaded here -->
                    <div class="empty-state col-span-full text-center py-12 px-6">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-surface-tertiary mb-4">
                            <i class="fas fa-folder-open text-2xl text-gray-500"></i>
                        </div>
                        <p class="text-gray-400 font-medium">No projects yet</p>
                        <p class="text-gray-500 text-sm mt-1">Create your first project above to get started</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: Discovery Results -->
        <section id="section-discovery" class="hidden fade-in">
            <div class="card p-6 sm:p-8">
                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold mb-1">Discovery Results</h2>
                        <p class="text-gray-400">Review what we found in your project description</p>
                    </div>
                    <button onclick="goBack()" class="text-gray-400 hover:text-white transition flex items-center text-sm">
                        <i class="fas fa-arrow-left mr-2"></i>Back
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <!-- Domains -->
                    <div class="nested-card p-5">
                        <h3 class="font-semibold mb-4 flex items-center text-gray-200">
                            <i class="fas fa-layer-group icon-blue mr-3"></i>
                            Identified Domains
                        </h3>
                        <div id="domains-list" class="space-y-2">
                            <!-- Domains loaded here -->
                        </div>
                    </div>

                    <!-- Stakeholders -->
                    <div class="nested-card p-5">
                        <h3 class="font-semibold mb-4 flex items-center text-gray-200">
                            <i class="fas fa-users icon-success mr-3"></i>
                            Stakeholders
                        </h3>
                        <div id="stakeholders-list" class="space-y-2">
                            <!-- Stakeholders loaded here -->
                        </div>
                    </div>

                    <!-- Research Agents -->
                    <div class="nested-card p-5 md:col-span-2">
                        <h3 class="font-semibold mb-4 flex items-center text-gray-200">
                            <i class="fas fa-robot icon-rust mr-3"></i>
                            Generated Research Agents
                        </h3>
                        <div id="agents-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                            <!-- Agents loaded here -->
                        </div>
                    </div>
                </div>

                <div class="flex justify-end mt-8">
                    <button onclick="showPrivacyReview()" class="btn-primary flex items-center space-x-2">
                        <span>Continue to Privacy Review</span>
                        <i class="fas fa-arrow-right text-sm"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Step 3: Privacy Review -->
        <section id="section-privacy" class="hidden fade-in">
            <div class="card p-6 sm:p-8">
                <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4">
                    <div>
                        <h2 class="text-2xl font-bold mb-1">Privacy Review</h2>
                        <p class="text-gray-400">Review flagged content before sending to AI</p>
                    </div>
                    <button onclick="showDiscovery()" class="text-gray-400 hover:text-white transition flex items-center text-sm">
                        <i class="fas fa-arrow-left mr-2"></i>Back
                    </button>
                </div>

                <div id="privacy-flags" class="space-y-4 mb-6">
                    <!-- Privacy flags loaded here -->
                </div>

                <div id="no-privacy-issues" class="hidden text-center py-10">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-500/10 mb-4">
                        <i class="fas fa-check-circle text-3xl text-green-400"></i>
                    </div>
                    <p class="text-green-400 font-semibold text-lg">No privacy concerns detected</p>
                    <p class="text-gray-500 text-sm mt-1">Your project description appears safe to process</p>
                </div>

                <div class="nested-card p-5 mb-6">
                    <h3 class="font-semibold mb-3 text-gray-200">What will be sent to Claude API:</h3>
                    <pre id="sanitized-preview" class="text-sm text-gray-400 whitespace-pre-wrap font-mono bg-surface-primary p-4 rounded-lg"></pre>
                </div>

                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 pt-4 border-t border-border-subtle">
                    <label class="flex items-center cursor-pointer group">
                        <input type="checkbox" id="privacy-consent" class="mr-3">
                        <span class="text-sm text-gray-300 group-hover:text-white transition">I approve sending this data to the Claude API for processing</span>
                    </label>
                    <button onclick="startGeneration()" id="approve-btn"
                        class="btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none w-full sm:w-auto justify-center"
                        disabled>
                        <span>Approve & Generate</span>
                        <i class="fas fa-check text-sm"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Step 4: Generation Progress & Results -->
        <section id="section-results" class="hidden fade-in">
            <div class="card p-6 sm:p-8">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-1">Document Generation</h2>
                    <p id="generation-status" class="text-gray-400">Generating your project documentation...</p>
                </div>

                <!-- Progress -->
                <div id="progress-section" class="mb-8">
                    <div class="flex items-center justify-between mb-3">
                        <span class="text-sm font-medium text-gray-300">Progress</span>
                        <span id="progress-text" class="text-sm text-gray-500">0 / 15 documents</span>
                    </div>
                    <div class="progress-track">
                        <div id="progress-bar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Real-time Folder Tree -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-5">
                    <!-- Folder Structure -->
                    <div class="nested-card p-5">
                        <h3 class="font-semibold mb-4 flex items-center text-gray-200">
                            <i class="fas fa-folder-tree icon-warning mr-3"></i>
                            Project Structure
                        </h3>
                        <div id="folder-tree" class="font-mono text-sm space-y-1">
                            <div class="text-gray-500">Initializing...</div>
                        </div>
                    </div>

                    <!-- Activity Log -->
                    <div class="nested-card p-5">
                        <h3 class="font-semibold mb-4 flex items-center text-gray-200">
                            <i class="fas fa-terminal icon-success mr-3"></i>
                            Live Activity
                        </h3>
                        <div id="activity-log" class="font-mono text-xs space-y-2 max-h-64 overflow-y-auto pr-2">
                            <!-- Activity entries will appear here -->
                        </div>
                    </div>
                </div>

                <!-- Generated Documents Grid -->
                <div class="mt-8">
                    <h3 class="font-semibold mb-4 text-gray-200">Generated Documents</h3>
                    <div id="documents-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Documents loaded here -->
                    </div>
                </div>

                <!-- Actions -->
                <div id="results-actions" class="hidden flex flex-col sm:flex-row items-stretch sm:items-center justify-between mt-8 pt-6 border-t border-border-subtle gap-4">
                    <button onclick="downloadAll()" class="btn-secondary flex items-center justify-center space-x-2">
                        <i class="fas fa-download"></i>
                        <span>Download All</span>
                    </button>
                    <button onclick="startNew()" class="btn-primary flex items-center justify-center space-x-2">
                        <i class="fas fa-plus"></i>
                        <span>New Project</span>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Document Preview Modal -->
    <div id="modal" class="hidden fixed inset-0 modal-overlay z-50 flex items-center justify-center p-4">
        <div class="card max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-5 border-b border-border-subtle">
                <h3 id="modal-title" class="font-bold text-lg text-white"></h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-white transition p-1">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
            <div id="modal-content" class="p-6 overflow-y-auto max-h-[60vh]">
                <pre class="whitespace-pre-wrap text-sm text-gray-300 font-mono"></pre>
            </div>
            <div class="p-5 border-t border-border-subtle flex flex-col sm:flex-row justify-end gap-3">
                <button onclick="copyDocument()" class="btn-secondary flex items-center justify-center space-x-2">
                    <i class="fas fa-copy"></i>
                    <span>Copy</span>
                </button>
                <button onclick="downloadDocument()" class="btn-primary flex items-center justify-center space-x-2">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed bottom-4 right-4 space-y-3 z-50 max-w-sm"></div>

    <script src="/static/js/app.js?v=5"></script>
</body>
</html>
